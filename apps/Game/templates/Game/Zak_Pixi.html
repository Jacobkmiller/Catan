<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Pixi Test</title>
    {% load static %}
    <style>
        body {
            margin: 0;
            padding: 0;
            background-color: #000000;
        }
    </style>
    <script src="{% static 'Game/js/bower_components/pixi.js/bin/pixi.js' %}"></script>
</head>
<body>

    <script>

        var renderer = PIXI.autoDetectRenderer(900, 760, {backgroundColor: 0x1099bb, antialias: true});

        document.body.appendChild(renderer.view);

        var stage = new PIXI.Container();

        stage.interactive = true;

        var texture = PIXI.Texture.fromImage("static/Game/images/camera-256.png");

        function create_number(stage, number, x, y, radius) {
            var stats = {};

            stats[2] = {color: "#000000", probability: 1};
            stats[3] = {color: "#000000", probability: 2};
            stats[4] = {color: "#000000", probability: 3};
            stats[5] = {color: "#000000", probability: 4};
            stats[6] = {color: "#FF0000", probability: 5};
            stats[8] = {color: "#FF0000", probability: 5};
            stats[9] = {color: "#000000", probability: 4};
            stats[10] = {color: "#000000", probability: 3};
            stats[11] = {color: "#000000", probability: 2};
            stats[12] = {color: "#000000", probability: 1};

            var num_piece = new PIXI.Graphics();

            num_piece.beginFill(0xFAEA92);
            num_piece.lineStyle(2, 0x927D07, 1);
            num_piece.drawCircle(x, y, radius);
            stage.addChild(num_piece);

            var textStyle = {fill: stats[number]['color'],
                             fontSize: radius*1.2 + 'px'
            };
            var text_num = new PIXI.Text(number, textStyle);
            text_num.anchor.x = 0.5;
            text_num.anchor.y = 0.5;
            text_num.x = x;
            text_num.y = y- radius*0.05;

            add_probability(stage, number, x, y, radius);

            stage.addChild(text_num);


        }

        function add_probability (stage, number, x, y, radius) {
            var stats = {};

            stats[2] = {color: "#000000", probability: 1};
            stats[3] = {color: "#000000", probability: 2};
            stats[4] = {color: "#000000", probability: 3};
            stats[5] = {color: "#000000", probability: 4};
            stats[6] = {color: "#FF0000", probability: 5};
            stats[8] = {color: "#FF0000", probability: 5};
            stats[9] = {color: "#000000", probability: 4};
            stats[10] = {color: "#000000", probability: 3};
            stats[11] = {color: "#000000", probability: 2};
            stats[12] = {color: "#000000", probability: 1};

            var prob = stats[number]["probability"];
            var color = parseInt(stats[number]['color'].replace("#", ''), 16);
            var g = new PIXI.Graphics();
            for (j=0; j<prob; j++) {
                g.beginFill(color);

                if (prob%2 != 0) {
                    g.drawCircle(x-radius*Math.floor(prob/2)*0.15 + j*0.15*radius, y+radius*0.55, radius*0.05);
                    console.log("odd")
                }   else {
                    console.log("even");
                    g.drawCircle(x-radius*Math.floor(prob/2)*0.15 + j*0.15*radius + radius*0.05, y+radius*0.55, radius*0.05);
                }
            }

            stage.addChild(g);


        }
        var camera = new PIXI.Sprite(texture);

        camera.anchor.x = 0.5;
        camera.anchor.y = 0.5;

        camera.position.x = 300;
        camera.position.y = 250;

        stage.addChild(camera);

        create_number(stage, 6, 100, 100, 35);
        create_number(stage, 3, 350, 200, 35);
        create_number(stage, 12, 500, 500, 70);
        create_numver(stage, )

        animate();


        function animate() {
            requestAnimationFrame( animate );

            camera.rotation += 0.1;

            renderer.render(stage);
        }
    </script>
</body>
</html>